@model Models.ViewModel.CreateQuestionVM

<div class="card">
        <div class="card-header bg-primary shadow">
            <h4 class="text-center"> Create Question</h4>
        </div>
        <div class="card-body">
        <form method="post" enctype="multipart/form-data">
                <div class="row">
                    <div class="col-6 ">
                        <label asp-for="Question.QuestionName" class="form-label p-2">Question Name</label>
                        <input type="text" class="form-control" asp-for="Question.QuestionName" placeholder="Question Name" />
                    </div>
                </div>

                <div class="row">
                    <div class="col-6 ">
                        <label asp-for="Question.QuestionText" class="form-label p-2">Question Text</label>
                        <input type="text" class="form-control" asp-for="Question.QuestionText" placeholder="Question Text" />
                    </div>
                </div>

                <div class="row">
                    <div class="col-6 ">
                        <label asp-for="Question.Score" class="form-label p-2">Score</label>
                        <input type="text" class="form-control" asp-for="Question.Score" placeholder=" Score" />
                    </div>
                </div>

            <div class="row">
                <div class="col-6 ">
                    <label asp-for="Question.Difficulty" class="form-label p-2">Difficulty</label>
                    <select asp-for="Question.Difficulty" class="form-select">
                        <option value="Easy">Easy</option>
                        <option value="Med">Med</option>
                        <option value="Hard">Hard</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-6 ">
                    <label asp-for="Question.Category.CategoryName" class="form-label p-2"></label>
                     <select asp-for="Question.CategoryId" asp-items="@Model.Categries" class="form-select">
                         <option> Select Category</option>
                     </select>
                </div>
            </div>

             <div id="options-container">
               
             </div>

              <div class="row">
                <div class="col-6 pt-2">
                    <label asp-for="Question.Options" class="form-label p-2"></label>
                    <a id="addOptionBtn" class="btn btn-primary" onclick="AddOption()"><i class="bi bi-plus-square"></i></a>
                </div>
               </div>
               <div class="row">
                   <div class="col-6">
                       <input type="file" class="form-input" name="file" placeholder="Choose file"/>
                   </div>
               </div>
           
                <div class="row pt-2">
                    <div class="col-6">
                        <button class="btn btn-primary" asp-controller="Question" asp-action="Create"> Create</button>
                    </div>
                </div>

            </form>
        </div>
    </div>
@section Scripts{
    <script>
       
        let index = 0;
        function AddOption()

        {
            return `<div class="row">
                    <div class="col-6 ">
                         <label asp-for="Question.Options" class="form-label p-2">Option ${index}</label>
                         <input type="text" class="form-control" name="Question.Options[${index}]" placeholder=" option" />
                    </div>
                   <a href="#" class="deleteOption"> <i class="bi bi-dash-circle"></i></a>
                </div>`;
        }

        document.getElementById('addOptionBtn').addEventListener('click', function() {

              const container = document.getElementById('options-container');
              const wrapper = document.createElement('div');
              wrapper.innerHTML = AddOption();
              container.appendChild(wrapper);
                  index++;
        });
 

           const AllOptionsWrapper = document.getElementById('options-container');
        AllOptionsWrapper.addEventListener('click',function(e){
            const deletebtn = e.target.closest('.deleteOption');
            if(deletebtn)
            {
                e.preventDefault();
                e.target.closest('.row').remove();
                reindex();
            }

        });
        function reindex(){
            const allremainingtags = document.querySelectorAll('#options-container .row');
            allremainingtags.forEach((row,newindex)=>{
                const input = row.querySelector('input');
                const label = row.querySelector('label');
                if(input){
                    input.name = `Options[${newindex}]`;
                }
                 if(label){
                    label.innerHTML = `Option ${newindex}`;
                }

            });
            index = allremainingtags.length;
        }
       
    </script>
}
    
 

 
 